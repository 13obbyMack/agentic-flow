FROM node:22-slim

WORKDIR /app

# Copy local package for testing
COPY package.json ./
COPY dist ./dist
COPY .claude ./.claude
COPY docs ./docs

# Install dependencies and link globally
RUN npm install --omit=dev && npm link

# Set up environment
ENV NODE_ENV=production

ENTRYPOINT ["agentic-flow"]
CMD ["--help"]
